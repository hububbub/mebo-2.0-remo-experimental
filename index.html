<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Mebo Control</title>
  <style>
    body { font-family: sans-serif; }
    #settings { padding: 10px; }
    .ai-settings { margin-top: 10px; }
    label { display: block; margin: 5px 0; }
  </style>
</head>
<body>
  <h1>Mebo Control App</h1>

  <!-- AI Settings Tab -->
  <div id="settings">
    <h2>AI Settings</h2>
    <div class="ai-settings">
      <label>
        <input type="radio" name="aiProvider" value="cloud" checked>
        Cloud (OpenAI)
      </label>
      <label>
        <input type="radio" name="aiProvider" value="local">
        Local API
      </label>

      <label>
        Local API URL:
        <input type="text" id="localApiUrl" value="http://localhost:5000/v1/chat/completions">
      </label>

      <button onclick="saveAISettings()">Save AI Settings</button>
    </div>
  </div>

  <script>
    function saveAISettings() {
      const provider = document.querySelector("input[name='aiProvider']:checked").value;
      window.meboAI.setProvider(provider);

      if (provider === "local") {
        const url = document.getElementById("localApiUrl").value;
        window.meboAI.setLocalApiUrl(url);
      }

      alert("AI settings saved: " + provider);
    }

    async function analyzeView() {
      const frame = await captureFrame();
      const result = await window.meboAI.analyzeFrame(frame);
      dispatchLLMResponse(result);
    }

    function dispatchLLMResponse(json) {
      if (json.say) speakText(json.say);
      if (json.action) sendMeboCommand(json.action, json.duration || 1000);
    }

    // Placeholder functions (replace with real ones in your app)
    function captureFrame() { return Promise.resolve("data:image/jpeg;base64,..."); }
    function speakText(text) { console.log("Speaking:", text); }
    function sendMeboCommand(action, duration) {
      console.log("Executing:", action, "for", duration, "ms");
    }
  </script>
</body>
</html>
